/*! For license information please see desktop-header.f54aa1e253ac76a3d896.js.LICENSE.txt */
"use strict";(self["webpackChunkavito_desktop_site"]=self["webpackChunkavito_desktop_site"]||[]).push([[7215],{62093:function(e,t,n){n.d(t,{Z:function(){return jt}});var r=n(84481),a=n.n(r),l=n(89645),i=n(59692),o=n(43193),c=n(64167),s=n(22854);function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],i=!0,o=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);i=!0);}catch(c){o=!0,a=c}finally{try{i||null==n["return"]||n["return"]()}finally{if(o)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=new function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),d(this,"subscribe",(function(e){var n=t.listeners.length;t.listeners.push(e),n||t.start()})),d(this,"unsubscribe",(function(e){t.listeners=t.listeners.filter((function(t){return t!==e})),t.listeners.length||t.stop()})),d(this,"start",(function(){document.addEventListener("visibilitychange",t.handleChangeVisibility),document.addEventListener("updateCartCounter",t.handleUpdateFromEvent),document.hidden||t.handleFetchCounters()})),d(this,"stop",(function(){document.removeEventListener("visibilitychange",t.handleChangeVisibility),document.removeEventListener("updateCartCounter",t.handleUpdateFromEvent)})),d(this,"handleFetchCounters",(function(){fetch("/web/1/cart/quantity").then((function(e){return e.json()})).then((function(e){var n=e.quantity;t.handleChange(n)})).catch((function(){}))})),d(this,"handleChange",(function(e){t.listeners.forEach((function(t){t(e)}))})),d(this,"handleUpdateFromEvent",(function(e){t.handleChange(e.detail.counter)})),d(this,"handleChangeVisibility",(function(){"visible"===document.visibilityState&&t.handleFetchCounters()})),this.listeners=[]},h={subscribe:f.subscribe,unsubscribe:f.unsubscribe};var v=n(67465);function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],i=!0,o=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);i=!0);}catch(c){o=!0,a=c}finally{try{i||null==n["return"]||n["return"]()}finally{if(o)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=new function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),E(this,"listener",void 0),E(this,"subscribe",(function(e){t.listener=e,t.start()})),E(this,"unsubscribe",(function(){t.listener=void 0,t.stop()})),E(this,"start",(function(){document.addEventListener("visibilitychange",t.handleVisibilityChange),t.handleFetchCounters()})),E(this,"stop",(function(){document.removeEventListener("visibilitychange",t.handleVisibilityChange)})),E(this,"handleVisibilityChange",(function(){document.hidden||t.handleFetchCounters()})),E(this,"handleFetchCounters",(function(){fetch("/web/1/profile/attention-count").then((function(e){return e.json()})).then((function(e){var n=e.result;t.handleChange(n.count)}))})),E(this,"handleChange",(function(e){t.listener&&t.listener(e)}))},b=function(e){var t=p((0,r.useState)(0),2),n=t[0],a=t[1],l=(0,r.useCallback)((function(e){a(e)}),[]);return(0,r.useEffect)((function(){return(0,v.Z)(e)?y.unsubscribe():y.subscribe(l),function(){y.unsubscribe()}}),[e,l]),n},k=n(82444);function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w="notifications-counter",S="/js/notifications/count?platform=desktop",_=5*60*1e3,A="profile-notifications";var x=function(){function e(t){var n=t.userId,r=t.currentPage,a=t.updateUI;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),N(this,"currentPage",void 0),N(this,"updateUI",void 0),N(this,"userId",void 0),this.userId=n,this.updateUI=a,this.currentPage=r,this.checkCurrentUserData(),this.subscribeVisibilityChange(),this.subscribeLocalStorageChange(),document.hidden||(this.isNotificationsPage()?this.resetCounter():this.init())}var t,n,r;return t=e,(n=[{key:"checkCurrentUserData",value:function(){var e=localStorage.getItem(w);if(e)try{JSON.parse(e).userId!==this.userId&&localStorage.removeItem(w)}catch(t){}}},{key:"subscribeVisibilityChange",value:function(){var e=this;document.addEventListener("visibilitychange",(function(){"visible"===document.visibilityState&&(e.isNotificationsPage()?e.resetCounter():e.init())}))}},{key:"subscribeLocalStorageChange",value:function(){var e=this;window.addEventListener("storage",(function(t){if(t.key===w&&t.newValue)try{var n=JSON.parse(t.newValue);e.updateUI(n.unread)}catch(r){}}))}},{key:"init",value:function(){var e,t=null,n=localStorage.getItem(w);if(n)try{t=JSON.parse(n)}catch(r){}t?(e=t.timestamp,Date.now()-e>=_?(localStorage.removeItem(w),this.fetchCounterData()):this.updateUI(t.unread)):this.fetchCounterData()}},{key:"resetCounter",value:function(){localStorage.removeItem(w);var e={userId:this.userId,timestamp:Date.now(),unread:0};localStorage.setItem(w,JSON.stringify(e))}},{key:"fetchCounterData",value:function(){var e=this;fetch(S,{credentials:"same-origin",headers:{Accept:"application/json"}}).then((function(e){if(!e.ok)throw new Error(e.statusText);return e.json()})).then((function(t){var n=t.unread;e.updateUI(n);var r={userId:e.userId,timestamp:Date.now(),unread:n};localStorage.setItem(w,JSON.stringify(r))})).catch((function(){}))}},{key:"isNotificationsPage",value:function(){return this.currentPage===A}}])&&C(t.prototype,n),r&&C(t,r),e}(),I=n(82662),O=n(84921),P=n(94627),L="PRO_ONBOARDING_HAS_BEEN_SHOWN",j=n(28150),M=n(94184),T=n.n(M),z=n(54963),V=n(45536),F=n(87271),U=n(3982),Z=n(54377),B=n(82640),D=n(21522),R=n(48515),H=n(40905),G=n(73656),W=n(81020),$=n(63968),q=function(e){var t=e.size;return r.createElement("svg",{version:"1",xmlns:"http://www.w3.org/2000/svg",style:{width:t,height:t},viewBox:"0 0 36 36"},r.createElement("path",{fill:"currentColor",d:"M17.1 5.4L13.9 14l-9.2.3c-1.3.1-1.3 1.2-.6 1.8l7.2 5.7-2.5 8.8c-.4 1.1.7 1.6 1.5 1.1l7.6-5.1 7.6 5.1c.6.4 1.8.2 1.5-1.1l-2.5-8.8 7.2-5.7c.8-.7.8-1.7-.6-1.8l-9-.3L19 5.4c-.5-1.1-1.5-1.1-1.9 0z"}))},J=r.memo(q),Y="index-active-_a9kp",X="index-half-star-Jc0O_",K="index-star-F_T58",Q="index-with-hover-effect-YOuq9";function ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var te=function(e){var t=e.currentRatingValue,n=void 0===t?0:t,a=e.marker,l=e.markerId,i=e.minRatingValues,o=e.onClick,c=e.onMouseEnter,s=e.size,u=e.value,m=e.withHoverEffect;return r.createElement("li",{className:T()(K,ee({},Q,m)),"data-marker":a+l,onClick:function(){o&&o(u)},onMouseEnter:function(){c&&c(u)}},r.createElement("div",{className:T()(n>i[1]&&Y)},r.createElement(J,{size:s})),r.createElement("div",{className:T()(X,n>i[0]&&Y)},r.createElement(J,{size:s})))},ne=r.memo(te),re="index-root-pDqqP";function ae(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],i=!0,o=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);i=!0);}catch(c){o=!0,a=c}finally{try{i||null==n["return"]||n["return"]()}finally{if(o)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return le(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return le(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function le(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ie=[{minRatingValues:[0,0],value:1},{minRatingValues:[1.2,1.7],value:2},{minRatingValues:[2.2,2.7],value:3},{minRatingValues:[3.2,3.7],value:4},{minRatingValues:[4.2,4.7],value:5}],oe=function(e){var t=e.marker,n=e.onChange,a=e.size,l=e.value,i=void 0===l?0:l,o=e.withHoverEffect,c=ae(r.useState(i),2),s=c[0],u=c[1],m=function(e){n&&n(e)},d=function(e){o&&u(e)};return r.createElement("ul",{className:re,"data-marker":t,onMouseLeave:function(){o&&u(0)}},ie.map((function(e,n){return r.createElement(ne,{key:e.value,currentRatingValue:s,marker:t+"/star",markerId:n,minRatingValues:e.minRatingValues,size:a,value:e.value,withHoverEffect:o,onClick:m,onMouseEnter:d})})))},ce=r.memo(oe),se=n(87111);function ue(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],i=!0,o=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);i=!0);}catch(c){o=!0,a=c}finally{try{i||null==n["return"]||n["return"]()}finally{if(o)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return me(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return me(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function me(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var de=function(e){var t=e.className,n=e.children,a=ue(r.useState(!1),2),l=a[0],i=a[1],o=r.useRef(null),c=(0,se.k)(l),s=c.purchases+c.sales+b();return r.useEffect((function(){var e=o.current;if(!e)return function(){};var t=new IntersectionObserver((function(e){e.some((function(e){return e.isIntersecting}))&&(i(!0),t.disconnect())}));return t.observe(e),function(){t.disconnect()}}),[i]),r.createElement("li",{ref:o,className:t,"data-marker":"header/tooltip-list-item"},n({actionOrdersCount:s}))},fe="index-root-zEAcT",he="index-group-dOvAx",ve="index-profile-nav-item-_1GCu",pe="index-profile-nav-item_value-__w0G",ge="index-profile-nav-item_entirely-hAeXg",Ee="index-profile-nav-item_exit-HGwrS",ye="index-profile-nav-item-bonus-Rxa6V",be="index-link-grow-yd1pn",ke="index-rating-line-sXrT0",Ce="index-stars-_jrjX",Ne="index-pro-lk-nav-item-BioMu",we="index-pro-lk-label-_b0B0",Se="index-pro-lk-icon-GpUC_",_e="index-pro-lk-onboarding-erkUs";function Ae(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],i=!0,o=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);i=!0);}catch(c){o=!0,a=c}finally{try{i||null==n["return"]||n["return"]()}finally{if(o)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return xe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ie=["бонус","бонуса","бонусов"],Oe="https://ipoteka.avito.ru",Pe=function(e){return"".concat((0,Z.WU)(e)," ₽")},Le=function(e){return"".concat((0,Z.WU)(e)," ").concat((0,U.H)(e,Ie))},je=function(e){var t,n,l,i,o=e.headerInfo,c=e.hierarchy,s=e.userAccount,u=e.currentPage,m=e.handlers,d=e.host,f=void 0===d?"":d,h=e.unreadFavoritesCount,v=e.unreadMessengerCount,p=e.unreadNotificationsCount,g=e.user,E=e.isSpaEnabled,y=e.isB2CDeliverySettingsVisible,b=e.isOpened,k=e.ProfileSwitchComponent,C=Ae((0,r.useState)(!1),2),N=C[0],w=C[1],S=(null==s?void 0:s.isSeparationBalance)&&s.balance.bonus,_=S||(null==g||null===(t=g.tariffInfo)||void 0===t?void 0:t.isVisible),A=(null==g||null===(n=g.tariffInfo)||void 0===n?void 0:n.isActive)||(null==c?void 0:c.isEmployee),x=null==g?void 0:g.isLegal;(0,r.useEffect)((function(){var e="PRO_ENTRY_POINT_EVENT_HAS_BEEN_SENT";!sessionStorage.getItem(e)&&b&&(O.Z.sendEvent(6573,1,{has_onboarding:Boolean(null==g?void 0:g.hasProWelcomeOnboarding)}),sessionStorage.setItem(e,"1"))}),[b,g]),(0,r.useEffect)((function(){null===localStorage.getItem(L)&&null!=g&&g.hasProWelcomeOnboarding&&w(!0)}),[g]);var I,P,M=function(){return a().createElement("li",{className:ve,"data-marker":"header/tooltip-list-item"},a().createElement("div",{className:be},a().createElement(G.r,{href:"".concat(f,"/account")},"Кошелёк")),a().createElement("div",{className:pe,"data-marker":"header/wallet-value"},s?Pe(S?s.balance.real:s.balance.total):null,s&&S?a().createElement("span",{className:ye},Le(s.balance.bonus)):null))};return a().createElement("ul",{className:fe,"data-marker":"header/tooltip-list"},function(){if(null==o||!o.rating)return null;var e,t=o.rating,n=a().createElement("div",{className:ke},(void 0!==t.scoreFloat||void 0!==t.score)&&a().createElement(a().Fragment,null,a().createElement(R.c,{size:"s"},(e=t.scoreFloat||t.score||0,Number(e).toFixed(1).replace(".",","))),a().createElement("span",{className:Ce},a().createElement(ce,{value:t.scoreFloat||t.score||0,marker:"stars",size:"20px"}))),a().createElement(H.D,{size:"s"},t.summary));return"ratings"===u?a().createElement(H.D,null,n):a().createElement("div",{className:he},a().createElement(G.r,{href:"".concat(f,"/profile/rating?page_from=profile_menu")},n))}(),A&&a().createElement("div",{className:he},(P=null!=c&&c.isEmployee?"https://pro.avito.ru/":"https://pro.avito.ru/?utm_source=avito&utm_medium=organic&utm_content=top_menu_link",a().createElement("li",{className:T()(ve,Ne)},a().createElement(a().Fragment,null,a().createElement("div",{className:be},a().createElement(G.r,{href:P,target:"_blank",rel:"noopener noreferrer",onClick:null==m?void 0:m.handleProClick},a().createElement("div",{className:we},a().createElement(H.D,null,"Кабинет")," ",a().createElement("div",{className:Se}),N&&a().createElement("div",{className:_e},a().createElement(D.E,{size:"s"}))))),(null==c?void 0:c.isEmployee)&&(null==c?void 0:c.companyName)&&a().createElement(W.P,{size:"xs",noAccent:!0},"сотрудник компании «",c.companyName,"»"))))),a().createElement("div",{className:he},a().createElement("li",{className:T()(ve,ge),"data-marker":"header/tooltip-list-item"},f||!E?a().createElement(G.r,{href:"".concat(f,"/profile")},"Мои объявления"):a().createElement(j.Link,{to:"/profile",component:G.r},"Мои объявления")),a().createElement(de,{className:ve},(function(e){var t=e.actionOrdersCount;return a().createElement(a().Fragment,null,a().createElement("div",{className:be},f||!E?a().createElement(G.r,{href:"".concat(f,"/orders/sales?source=shortcut")},"Заказы"):a().createElement(j.Link,{to:"/orders/sales?source=shortcut",component:G.r},"Заказы")),t?a().createElement(B.C,{count:t,size:18,px:6,fontWeight:"normal",fontSize:13}):null)})),(I="?page_from=profile_menu",a().createElement("li",{className:T()(ve,ge)},f||!E?a().createElement(G.r,{href:"".concat(f,"/profile/contacts").concat(I)},"Мои отзывы"):a().createElement(j.Link,{to:"/profile/contacts".concat(I),component:G.r},"Мои отзывы"))),a().createElement("li",{className:ve,"data-marker":"header/tooltip-list-item"},a().createElement("div",{className:be},f||!E?a().createElement(G.r,{href:"".concat(f,"/favorites"),"data-marker":"header/username-tooltip/favorites"},"Избранное"):a().createElement(j.Link,{to:"/favorites",component:G.r,"data-marker":"header/username-tooltip/favorites"},"Избранное")),h?a().createElement(H.D,{color:"gray44","data-marker":"header/username-tooltip/favorites/count"},h):null)),a().createElement("div",{className:he},a().createElement("li",{className:ve,"data-marker":"header/tooltip-list-item"},a().createElement("div",{className:be},f||!E?a().createElement(G.r,{href:"".concat(f,"/profile/messenger"),onClick:null==m?void 0:m.handleMessengerClick},"Сообщения"):a().createElement(j.Link,{to:"/profile/messenger",component:G.r,onClick:null==m?void 0:m.handleMessengerClick},"Сообщения")),v?a().createElement(H.D,{color:"gray44"},v):null),g?a().createElement("li",{className:ve,"data-marker":"header/tooltip-list-item"},a().createElement("div",{className:be},f||!E?a().createElement(G.r,{href:"".concat(f,"/profile/notifications")},"Уведомления"):a().createElement(j.Link,{to:"/profile/notifications",component:G.r},"Уведомления")),p?a().createElement(H.D,{color:"gray44"},p):null):null),_?a().createElement(a().Fragment,null,a().createElement("div",{className:he},M()),null!=g&&null!==(l=g.tariffInfo)&&void 0!==l&&l.isVisible?a().createElement("div",{className:he},null!=g&&g.tariffInfo?a().createElement("li",{className:ve,"data-marker":"header/tooltip-list-item"},a().createElement("div",{className:be},a().createElement(G.r,{href:"".concat(f).concat(g.tariffInfo.url)},g.tariffInfo.name)),g.tariffInfo.isActive&&g.tariffInfo.hasBalance?a().createElement("div",{className:pe,"data-marker":"header/wallet-value"},Pe(g.tariffInfo.balanceLeft),g.tariffInfo.hasBonuses?a().createElement("span",{className:ye},Le(g.tariffInfo.bonusesLeft)):null):null):null):null):null,a().createElement("div",{className:he},_?null:M(),a().createElement("li",{className:T()(ve,ge),"data-marker":"header/tooltip-list-item"},a().createElement(G.r,{href:"".concat(f,"/paid-services/listing-fees")},"Платные услуги")),null==g||!g.isLegal||g.hasShopSubscription||null!=g&&g.hasAvitoPro?null:a().createElement("li",{className:T()(ve,ge),"data-marker":"header/tooltip-list-item"},a().createElement(G.r,{href:"".concat(f,"/account/documents")},"Бухгалтерия")),function(){if(null!=g&&g.hasShopSubscription||null!=g&&g.isLegal&&null!=g&&g.hasAvitoPro){var e,t="/professionals/accounting";return null!=g&&null!==(e=g.tariffInfo)&&void 0!==e&&e.isVisible?t="/professionals/employees":g.hasShopSubscription&&(t="/professionals/tariff"),a().createElement("li",{className:T()(ve,ge),"data-marker":"header/tooltip-list-item"},a().createElement(G.r,{href:"".concat(f).concat(t)},"Для профессионалов"))}return null}(),a().createElement("li",{className:T()(ve,ge),"data-marker":"header/tooltip-list-item"},f||!E?a().createElement(G.r,{href:"".concat(f,"/profile/campaigns?source=shortcut")},"Спецпредложения"):a().createElement(j.Link,{to:"/profile/campaigns?source=shortcut",component:G.r},"Спецпредложения")),function(){if(null==g||!g.mortgageAccount)return null;var e=g.mortgageAccount,t=e.tag,n=e.title;return a().createElement("li",{className:T()(ve,ge),"data-marker":"header/tooltip-list-item"},a().createElement(G.r,{href:Oe,rel:"noopener noreferrer",target:"_blank",onClick:null==m?void 0:m.handleMortgageAccountLinkClick},n," ",a().createElement($.r,null),t&&a().createElement(a().Fragment,null," ",a().createElement(B.C,{count:t,size:18,px:6,fontWeight:"normal",fontSize:13}))))}(),function(){if(null==g||!g.loyaltyPreferences)return null;var e=g.loyaltyPreferences,t=e.tag,n=e.title;return a().createElement("li",{className:T()(ve,ge),"data-marker":"header/tooltip-list-item"},f||!E?a().createElement(G.r,{href:"".concat(f,"/loyalty?source=header.menu")},n,t&&a().createElement(a().Fragment,null," ",a().createElement(B.C,{count:t,size:18,px:6,fontWeight:"normal",fontSize:13}))):a().createElement(j.Link,{to:"/loyalty?source=header.menu",component:G.r},n,t&&a().createElement(a().Fragment,null," ",a().createElement(B.C,{count:t,size:18,px:6,fontWeight:"normal",fontSize:13}))))}()),a().createElement("div",{className:he},a().createElement("li",{className:T()(ve,ge),"data-marker":"header/tooltip-list-item"},f||!E?a().createElement(G.r,{href:"".concat(f,"/profile/basic")},"Управление профилем"):a().createElement(j.Link,{to:"/profile/basic",component:G.r},"Управление профилем")),a().createElement("li",{className:T()(ve,ge),"data-marker":"header/tooltip-list-item"},f||!E?a().createElement(G.r,{href:"".concat(f,"/profile/safety")},"Защита профиля"):a().createElement(j.Link,{to:"/profile/safety",component:G.r},"Защита профиля")),a().createElement("li",{className:T()(ve,ge),"data-marker":"header/tooltip-list-item"},f||!E?a().createElement(G.r,{href:"".concat(f,"/profile/settings")},"Настройки"):a().createElement(j.Link,{to:"/profile/settings",component:G.r},"Настройки")),x&&!y?null:a().createElement("li",{className:T()(ve,ge),"data-marker":"header/tooltip-list-item"},f||!E?a().createElement(G.r,{href:"".concat(f,"/profile/settings/delivery")},"Авито Доставка"):a().createElement(j.Link,{to:"/profile/settings/delivery",component:G.r},"Авито Доставка"))),(null==g||null===(i=g.passport)||void 0===i?void 0:i.isFeatureEnabled)&&k&&a().createElement("div",{className:he},a().createElement(k,{user:g})),a().createElement("div",{className:he},a().createElement("li",{className:T()(ve,ge,Ee),"data-marker":"header/tooltip-list-item"},a().createElement(G.r,{href:"".concat(f,"/profile/exit"),onClick:null==m?void 0:m.handleSecuredTouchLogout},"Выйти"))))},Me=a().memo(je),Te=n(4997),ze=n.n(Te),Ve="index-root-_NPPn",Fe="index-sticky-TtGd0",Ue="index-icon-count-MhOkL",Ze="index-icon-count_red-_YT65",Be="index-icon-cart-onboarding-mgvaa",De="index-inner-iPEdy",Re="index-nav-r2kHM",He="index-nav-item-_YcoS",Ge="index-nav-link-muv1u",We="index-services-menu-WxCxG",$e="index-services-menu-link-Ia0Gb",qe="index-services-menu-avatar-XDJsi",Je="index-services-menu-avatar-image-UHk1Y",Ye="index-services-menu-icon-wrap-hucq_",Xe="index-services-menu-profile-icon-wrap-_9I9G",Ke="index-services-menu-icon-Bnhvb",Qe="index-services-menu-item-_O32t",et="index-profile-_4ijp",tt="index-username-bKfaE",nt="index-services-menu-link-not-authenticated-Pzomx",rt="index-services-menu-dropdown-popup_left-aYZYy",at="index-services-menu-dropdown-popup_right-tNIHA",lt="index-services-menu-dropdown-jvXqH",it="index-services-menu-dropdown-popup-AErO5",ot="index-add-button-wrapper-s0SLe",ct="index-narrowLayout-_YlhA",st="index-wideLayout-Q6G39",ut="index-nav-catalogs-bsSOl",mt="index-nav-catalog-link-N33oX",dt="index-nav-catalog-item-JUgGq",ft="index-responsive-N4Ry5",ht=(0,r.memo)((function(e){var t=e.catalogs,n=e.onClick,l=(0,r.useCallback)((function(e){switch(e.currentTarget.dataset.catalogSlug){case"catalog_auto":ze().set("comparison_from_page","main_menu",{expires:1});break;case"catalog_novostroyki":O.Z.sendEvent(6601,2,{node_type:"main_menu",target_page:e.currentTarget.href})}n&&n(e)}),[n]);return a().createElement("li",{className:T()(He,lt)},a().createElement("span",{className:T()(Ge,$e,mt)},"Каталоги"),a().createElement("div",{className:T()(it,ut)},t.map((function(e){return a().createElement("div",{key:e.slug,className:dt},a().createElement(G.r,{href:e.link,"data-catalog-slug":e.slug,onClick:l},e.title))}))))}));function vt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],i=!0,o=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);i=!0);}catch(c){o=!0,a=c}finally{try{i||null==n["return"]||n["return"]()}finally{if(o)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return gt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Et=function(e){var t=e.addButtonText,n=void 0===t?"Разместить объявление":t,l=e.userAccount,i=e.catalogs,o=e.headerInfo,c=e.hierarchy,s=e.cartCount,u=e.profileCount,m=e.currentPage,d=e.handlers,f=e.hasAddButton,h=e.host,v=void 0===h?"":h,p=e.isCartOnboarding,g=e.isResponsive,E=e.isNarrowLayout,y=e.isWideLayout,b=e.isSticky,k=e.isSpaEnabled,C=e.isB2CDeliverySettingsVisible,N=e.servicesClassName,w=e.unreadFavoritesCount,S=e.unreadMessengerCount,_=e.unreadNotificationsCount,A=e.user,x=e.isAvitoCare,I=void 0===x||x,O=e.ProfileSwitchComponent,P=pt((0,r.useState)(!1),2),L=P[0],M=P[1],U=function(){var e;return a().createElement("div",{className:tt},A?a().createElement("div",{className:lt,"data-marker":"header/menu-profile"},a().createElement("span",{className:Xe},a().createElement("a",{href:"".concat(v,"/profile"),className:T()($e,"ym-hide-content"),"data-marker":"header/username-button",onMouseEnter:function(){return M(!0)},onTouchStart:function(){return M(!0)},onMouseLeave:function(){return M(!1)},onTouchEnd:function(){return M(!1)}},A.avatar?a().createElement("div",{className:qe},a().createElement("img",{src:A.avatar.url,className:Je,alt:"Аватар",onClick:null==d?void 0:d.handleAvatarClick})):null,u?a().createElement("i",{"data-marker":"header/cart-counter",className:T()(Ue,Ze)},u>99?"99+":u):null,a().createElement("span",{onClick:null==d?void 0:d.handleUsernameClick},A.name))),a().createElement("div",{className:T()(it,(e={},vt(e,at,!f),vt(e,rt,f),e)),"data-marker":"header/username-tooltip"},a().createElement(Me,{currentPage:m,handlers:{handleProClick:null==d?void 0:d.handleProfilePopupProClick,handleMessengerClick:null==d?void 0:d.handleProfilePopupMessengerClick,handleMortgageAccountLinkClick:null==d?void 0:d.handleMortgageAccountLinkClick},headerInfo:o,hierarchy:c,unreadMessengerCount:S,unreadFavoritesCount:w,unreadNotificationsCount:_,userAccount:l,user:A,host:v,isOpened:L,isSpaEnabled:k,isB2CDeliverySettingsVisible:C,ProfileSwitchComponent:O}))):a().createElement("a",{className:T()($e,nt),href:"#login?authsrc=h","data-marker":"header/login-button",onClick:null==d?void 0:d.handleLoginClick},"Вход и регистрация"))},Z=function(){return a().createElement("div",{className:We},a().createElement("div",{"data-marker":"header/favorites",className:Qe},a().createElement("a",{className:$e,href:"".concat(v,"/favorites"),title:"Избранное",onClick:null==d?void 0:d.handleFavoritesClick},a().createElement("span",{className:Ye},a().createElement("span",{className:Ke},a().createElement("svg",{width:"21",height:"24",xmlns:"http://www.w3.org/2000/svg"},a().createElement("path",{d:"M10.918 5.085a5.256 5.256 0 0 1 7.524 0c2.077 2.114 2.077 5.541 0 7.655l-7.405 7.534a.75.75 0 0 1-1.074 0L2.558 12.74c-2.077-2.114-2.077-5.54 0-7.655a5.256 5.256 0 0 1 7.524 0c.15.152.289.312.418.479.13-.167.269-.327.418-.479z",fill:"#CCC",fillRule:"nonzero"}))),w?a().createElement("i",{"data-marker":"header/favorites-counter",className:T()(Ue,Ze)},w>99?"99+":w):null))),A?a().createElement("div",{"data-marker":"header/notifications",className:Qe},a().createElement("a",{className:$e,href:"".concat(v,"/profile/notifications"),title:"Уведомления"},a().createElement("span",{className:Ye},a().createElement("span",{className:Ke},a().createElement("svg",{width:"21",height:"24",xmlns:"http://www.w3.org/2000/svg"},a().createElement("g",{fill:"#CDCDCD",fillRule:"evenodd"},a().createElement("path",{d:"M1.816 17.744L4 14V9a6.5 6.5 0 1 1 13 0v5l2.184 3.744A1.5 1.5 0 0 1 17.888 20H3.112a1.5 1.5 0 0 1-1.296-2.256z"}),a().createElement("circle",{cx:"10.5",cy:"20",r:"2.5"})))),_?a().createElement("i",{"data-marker":"header/unread-notifications-counter",className:T()(Ue,Ze)},_>99?"99+":_):null))):null,A?a().createElement("div",{"data-marker":"header/messenger",className:Qe},a().createElement("a",{className:$e,href:"".concat(v,"/profile/messenger"),title:"Сообщения",onClick:null==d?void 0:d.handleMessengerClick},a().createElement("span",{className:Ye},a().createElement("span",{className:Ke},a().createElement("svg",{width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg"},a().createElement("g",{fill:"#CCC",fillRule:"evenodd"},a().createElement("path",{d:"M8.827 3.28A19.839 19.839 0 0 1 12 3c.97 0 2.027.093 3.173.28A8.135 8.135 0 0 1 22 11.309c0 3.804-2.84 7.01-6.617 7.468A28.26 28.26 0 0 1 12 19c-1.028 0-2.156-.074-3.383-.223A7.523 7.523 0 0 1 2 11.309 8.135 8.135 0 0 1 8.827 3.28z"}),a().createElement("path",{d:"M4.5 15l-1.773 4.963a.8.8 0 0 0 1.15.964L9 18l-4.5-3z"})))),S?a().createElement("i",{"data-marker":"header/unread-chats-counter",className:T()(Ue,Ze)},S>99?"99+":S):null))):null,A?a().createElement("div",{"data-marker":"header/cart",className:Qe},a().createElement("a",{className:$e,href:"".concat(v,"/order/cart"),title:"Корзина",onClick:null==d?void 0:d.handleCartClick},a().createElement("span",{className:Ye},a().createElement("span",{className:Ke},a().createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a().createElement("path",{d:"M5.047 2.422a1 1 0 0 0-1.79.803l2.71 11.748-.299 1.049A2.5 2.5 0 1 0 8.292 19.5h4.916a2.5 2.5 0 1 0 0-2H8.292c-.158-.362-.4-.68-.701-.928l.37-1.297A1 1 0 0 0 8 15l10.273-.934a1 1 0 0 0 .885-.779l1.626-7.313A.8.8 0 0 0 20.003 5H6.866a1.01 1.01 0 0 0-.05-.078l-1.769-2.5Z",fill:"#CCC"}))),s?a().createElement("i",{"data-marker":"header/cart-counter",className:T()(Ue,Ze)},s>99?"99+":s):p?a().createElement("i",{className:Be}):null))):null)},B=function(){var e,t=T()(Ve,N,(vt(e={},ft,g&&!E),vt(e,ct,E),vt(e,st,y),e));return a().createElement(V.D,null,a().createElement(F.f,null,a().createElement("div",{className:t,"data-marker":"header/navbar"},a().createElement("div",{className:De},a().createElement("ul",{className:Re},a().createElement("li",{className:He},a().createElement("a",{className:Ge,href:"".concat(v,"/business"),onClick:null==d?void 0:d.handleBusinessClick},"Для бизнеса")),(null==A?void 0:A.hasAvitoPro)&&a().createElement("li",{className:He},a().createElement("a",{className:Ge,href:"//pro.avito.ru",rel:"noopener noreferrer",target:"_blank",onClick:null==d?void 0:d.handleProClick},"Авито Pro")),a().createElement("li",{className:He},a().createElement("a",{className:Ge,href:"//career.avito.com/?utm_source=avito.ru&utm_medium=referral&utm_campaign=test_placement_to_career&utm_content=top_vacancy",rel:"noopener noreferrer",target:"_blank",onClick:null==d?void 0:d.handleLinkClick},"Вакансии")),a().createElement("li",{className:He},a().createElement("a",{className:Ge,href:"//support.avito.ru",rel:"noopener noreferrer",target:"_blank",onClick:null==d?void 0:d.handleLinkClick},"Помощь")),null!=i&&i.length?a().createElement(ht,{catalogs:i,onClick:null==d?void 0:d.handleLinkClick}):null,I&&a().createElement("li",{className:He},a().createElement("a",{className:Ge,href:"/avito-care?from=mp_header",rel:"noopener noreferrer",target:"_blank",onClick:null==d?void 0:d.handleLinkClick},"Авито Польза"))),Z(),A?a().createElement("div",{className:et},a().createElement("a",{className:$e,href:"".concat(v,"/profile"),onClick:null==d?void 0:d.handleMyItemsClick},"Мои объявления")):null,U(),function(){if(!f)return null;var e="".concat(v,"/additem");return A||(e="#login?next=".concat(encodeURIComponent(e),"&authsrc=ca")),!v&&A&&k?a().createElement("div",{className:ot},a().createElement(j.Link,{to:e,component:z.z,size:"s",preset:"accent",onClick:null==d?void 0:d.handleAddClick},n)):a().createElement("div",{className:ot},a().createElement(z.z,{href:e,size:"s",preset:"accent",onClick:null==d?void 0:d.handleAddClick},n))}()))))};return b?a().createElement("div",{className:Fe},B()):B()},yt=a().memo(Et),bt=["hasAddButton","page","pageType","counters","header","toggles","user","cartCount","profileCount"];function kt(){return kt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kt.apply(this,arguments)}function Ct(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],i=!0,o=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);i=!0);}catch(c){o=!0,a=c}finally{try{i||null==n["return"]||n["return"]()}finally{if(o)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Nt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function wt(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var St="is-cart-onboarding-label",_t=function(e){var t,n,a=e.hasAddButton,l=void 0===a||a,i=e.page,o=e.pageType,c=e.counters,s=void 0===c?0:c,u=e.header,m=e.toggles,d=e.user,f=e.cartCount,h=e.profileCount,v=wt(e,bt),p=Ct(r.useState(!1),2),g=p[0],E=p[1];r.useEffect((function(){Boolean(localStorage.getItem(St))||E(!0)}),[]);var y=function(e){if(e&&e.target){var t=e.target.innerText;t&&O.Z.sendEvent(7839,3,{from_page:o,link_button:t,block_type:"header"})}};return r.createElement(yt,kt({},v,{cartCount:f,profileCount:h,currentPage:i,handlers:{handleAddClick:function(){O.Z.sendEvent(2812,0,{pagetype:i}),d||O.Z.sendEvent(330,1,{pagetype:i})},handleAvatarClick:function(){O.Z.sendEvent(2811,0,{from_block:0,pagetype:i})},handleBusinessClick:function(e){P.Z.push({event:"gtm.generalEvent",eventCategory:null!=d&&d.isLegal?"verified":"funnel",eventAction:"create_shop",eventLabel:"header_link",eventValue:"value"}),O.Z.sendEvent(2811,0,{pagetype:i}),y(e)},handleCartClick:function(){O.Z.sendEvent(4647,4,{block_items_display:f,srcp:"header"}),localStorage.setItem(St,"true")},handleFavoritesClick:function(){O.Z.sendEvent(2818,0,{pagetype:i})},handleItemsClick:function(){O.Z.sendEvent(2814,0,{pagetype:i})},handleLoginClick:function(){O.Z.sendEvent(3229,0)},handleMessengerClick:function(){O.Z.sendEvent(3184,0,{s:"top_menu"})},handleMortgageAccountLinkClick:function(){O.Z.sendEvent(6918,0,{})},handleMyItemsClick:function(){O.Z.sendEvent(2814,0,{pagetype:i})},handleProClick:function(e){O.Z.sendEvent(3431,1,{from:"header"}),y(e)},handleProfilePopupProClick:function(){localStorage.setItem(L,"1"),O.Z.sendEvent(3431,1,{from:"headerTooltip"}),O.Z.sendEvent(6577,1,{from_type:"header_sheet"})},handleProfilePopupMessengerClick:function(){O.Z.sendEvent(3184,0,{s:"profile_menu"})},handleUsernameClick:function(){O.Z.sendEvent(2811,0,{from_block:1,pagetype:i})},handleSecuredTouchLogout:function(){(0,I.k)()},handleLinkClick:y},headerInfo:{rating:null==u||null===(t=u.headerInfo)||void 0===t?void 0:t.rating,experiments:null==u||null===(n=u.headerInfo)||void 0===n?void 0:n.experiments},hierarchy:u.hierarchy,isCartOnboarding:g,catalogs:u.catalogs,isSpaEnabled:null==m?void 0:m.spa_enabled,isB2CDeliverySettingsVisible:null==m?void 0:m.show_b2c_delivery_settings,hasAddButton:l,unreadFavoritesCount:s,user:d,userAccount:u.userAccount}))},At=["hasAddButton","pageId","pageType","children","ProfileSwitchComponent"];function xt(){return xt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xt.apply(this,arguments)}function It(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],i=!0,o=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);i=!0);}catch(c){o=!0,a=c}finally{try{i||null==n["return"]||n["return"]()}finally{if(o)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ot(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ot(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ot(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Pt(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Lt="@avito/app-nc:read-notification",jt=function(e){var t=e.hasAddButton,n=void 0===t||t,a=e.pageId,m=e.pageType,d=e.children,f=e.ProfileSwitchComponent,v=Pt(e,At),p=It(r.useState(s.Z.get()),2),g=p[0],E=p[1],y=It(r.useState(0),2),C=y[0],N=y[1],w=(0,l.r)(),S=(0,i.$)().header,_=(0,o.b)(["spa_enabled","is_new_social_auth","is_new_restore_api","recaptcha_enabled","show_b2c_delivery_settings","profile_order_badge"]),A=(0,c.a)(),I=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=u((0,r.useState)(0),2),a=n[0],l=n[1];return(0,r.useEffect)((function(){return e&&t?h.subscribe(l):h.unsubscribe(l),function(){h.unsubscribe(l)}}),[e,t]),a}(A),O=null!=_&&_.profile_order_badge?b(A):0;return r.useEffect((function(){return A?s.Z.subscribe(E):s.Z.unsubscribe(E),function(){s.Z.unsubscribe(E)}}),[A]),r.useEffect((function(){var e,t;return A&&(e=new x({currentPage:a,userId:A.id,updateUI:function(e){N(e)}}),t=e.fetchCounterData.bind(e),k.Ld(Lt,t,!0)),function(){A&&k.r1(Lt,t)}}),[A,a]),r.createElement(r.Fragment,null,d,r.createElement(_t,xt({},v,{cartCount:I,profileCount:O,hasAddButton:n,counters:w.total,header:S,toggles:_,user:A,unreadMessengerCount:g,unreadNotificationsCount:C,page:a,pageType:m,servicesClassName:"header-services",ProfileSwitchComponent:f})))}}}]);